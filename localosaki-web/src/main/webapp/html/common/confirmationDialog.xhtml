<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">
      <h:outputStylesheet library="css" name="common/popup.css"/>
    <rich:popupPanel id="confirmationDialog" modal="true" moveable="true" resizeable="false"  
                       top="180" width="480" height="300" zindex="320"
                       domElementAttachment="parent"
                       onshow="checkAutoFocusOnShowRichPanel(event);">

        <f:facet name="header">
            <div class="pop_title_area">
                <div class="left">
                    <h:outputText class="pop_page_title" value="#{confirmationDialogTitle}" />
                </div>
                <div class="pop_button_close">
                    <input type="button" value="" onclick="confirmationDialogClose();">
                    </input>
                </div>
            </div>
        </f:facet>
        <div  class="inner_content content_width">
            <table jsfc="h:panelGrid" columns="1" style="width: 100%;">
                <span jsfc="h:column" style="">
                    <input jsfc="h:outputText" id="confirmationDialogMessage" value="#{confirmationDialogMessage}" escape="false" 
                           class="page_subtitle" style="font-size: 16px; text-align:left;"/>
                </span>
                <span jsfc="h:column">
                    <table class="change_caution_button_area" style="text-align: center; margin-left: 13px;">
                        <tr>
                            <td class="gradation_type_1 button_large_2 ok_button">
                                <a4j:commandButton id="confirmationDialogOkButton" value="OK"
                                      style="width:160px;"
                                      onclick="confirmationDialogConfirm(); return false;"/>
                                <h:graphicImage style="pointer-events: none;" class="button_icon" library="images" name="common/com067.png" />
                            </td>
                            <td class="gradation_type_4 button_large_2 cancel_button">
                                <input type="button" id="confirmationDialogCancelButton" value="キャンセル"
                                       style="width:160px;"
                                        onclick="confirmationDialogClose(); return false;">
                                </input>
                                <h:graphicImage style="pointer-events: none;" class="button_icon" library="images" name="common/com021.png" />
                            </td>
                        </tr>
                    </table>
                </span>
            </table>
        </div>
    </rich:popupPanel>
      
    <script type="text/javascript">
        var confirmationDialogShowing = false;
        var confirmationButton;
        function confirmationDialogOpen(ctrl){
            if(confirmationDialogShowing){  //表示済みなら閉じて本来の処理(action)へ
                confirmationDialogClose();
                return true;
            }
            //未表示なら表示し、actionはしない
            confirmationButton = ctrl;
            confirmationDialogShowing = true;
            #{rich:component('confirmationDialog')}.show();
            $('input[id$=confirmationDialogCancelButton]').focus();
            return false;
        }
        function confirmationDialogClose(){
            if(confirmationDialogShowing){
                confirmationDialogShowing = false;
                #{rich:component('confirmationDialog')}.hide();
            }
        }
        function confirmationDialogConfirm(){
            confirmationButton.click(); //confirmationDialogOpen
            confirmationButton = null;
            confirmationDialogClose();
        }
    </script>
      
</html>